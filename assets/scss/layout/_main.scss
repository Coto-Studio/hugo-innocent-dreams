@use 'sass:color';
@use '../libs' as *;

///
/// Massively by HTML5 UP
/// html5up.net | @ajlkn
/// Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
///

/* Main */

	#main {
		// Background transparency
		background: color.adjust(palette(bg), $alpha: -0.065);
		
		position: relative;
		margin: 0 auto;
		width: calc(100% - #{size(padding) * 2});
		max-width: size(wrapper);
		z-index: 2;

		> * {
			@include padding((size(padding) * 2), (size(padding) * 2));
			border-top: solid 2px palette(border);
			margin: 0;

			&:first-child {
				border-top: 0;
			}
		}

		> footer {
			text-align: center;
		}

		> .post {
			max-width: 900px;
			margin-left: auto;
			margin-right: auto;
			padding: 6rem clamp(2rem, 5vw, 8rem) 4rem;

			// Add breathing room to text content
			p, ul, ol, blockquote {
				max-width: 60ch;
			}

			header {
				&.major {
					> .date {
						margin-top: -2rem;
					}

					> h1, h2 {
						font-size: clamp(1.3rem, 3vw + 0.75rem, 2.5rem);
						line-height: 1.15;
						margin: 0 0 size(element-margin) 0;
					}
				}
			}

			&.featured {
				text-align: center;
			}

			@include breakpoint('<=small') {
				header {
					&.major {
						> .date {
							margin-top: -1rem;
							margin-bottom: size(element-margin);
						}

						> h1, h2 {
							font-size: 2.5rem;
							line-height: 1.2;
							margin: 0 0 (size(element-margin) * 0.75) 0;
						}

						@include breakpoint('<=xsmall') {
							> h1, h2 {
								font-size: 2rem;
							}
						}
					}
				}
			}
		}

		> .posts {
			// CSS Grid layout (replaces fixed-grid mixin)
			display: grid;
			grid-template-columns: repeat(2, 1fr);
			gap: (size(padding) * 4);
			align-items: start;
			width: 100%;
			padding: 0;

			> article {
				border-color: palette(border);
				border-left-width: 2px;
				border-style: solid;
				border-top-width: 2px;
				text-align: center;
				padding: (size(padding) * 2);

				> :last-child {
					margin-bottom: 0;
				}

				// First column: no left border
				&:nth-child(2n - 1) {
					border-left-width: 0;
				}

				// First row: no top border
				&:nth-child(-n + 2) {
					border-top-width: 0;
				}
			}

			@include breakpoint('<=medium') {
				gap: (size(padding) * 2.5);

				header {
					> p {
						line-height: 1;
					}
				}
			}

			@include breakpoint('<=small') {
				grid-template-columns: 1fr;
				gap: (size(padding) * 2);

				> article {
					// Reset 2-column border rules
					&:nth-child(2n - 1) {
						border-left-width: 0;
					}

					&:nth-child(-n + 2) {
						border-top-width: 2px;
					}

					// Single column: only first has no top border
					&:first-child {
						border-top-width: 0;
					}

					.image {
						max-width: 25rem;
						margin-left: auto;
						margin-right: auto;
					}
				}
			}
		}

		@include breakpoint('<=small') {
			> * {
				@include padding((size(padding) * 1), (size(padding) * 1));
			}
		}

		@include breakpoint('<=xsmall') {
			width: 100%;
		}
	}